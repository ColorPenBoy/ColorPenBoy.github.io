<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Runtime学习 | 彩笔</title><meta name="description"><meta name="generator" content="彩笔"><meta name="author" content="Color Pen"><meta name="keywords"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="128x128" href="/images/favicon-128.png"><link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-196x196.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="mstile-144x144.png"><meta name="msapplication-square70x70logo" content="mstile-70x70.png"><meta name="msapplication-square150x150logo" content="mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="mstile-310x150.png"><meta name="msapplication-square310x310logo" content="mstile-310x310.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><div class="logo"></div><h1><a href="/" alt="彩笔" title="彩笔" itemprop="headline">彩笔</a></h1><p itemprop="description">眼中阅尽繁华，心中鲜衣怒马</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/ " alt="home" title="home" itemprop="url">home</a></li><li itemprop="name"><a href="/articles" alt="articles" title="articles" itemprop="url">articles</a></li><li itemprop="name"><a href="/author" alt="author" title="author" itemprop="url">author</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline" class="post-heading">Runtime学习</h1><span class="post-meta"></span><br><br><h4 id="学习Runtime，就是要搞清楚这几个问题："><a href="#学习Runtime，就是要搞清楚这几个问题：" class="headerlink" title="学习Runtime，就是要搞清楚这几个问题："></a>学习Runtime，就是要搞清楚这几个问题：</h4><ul>
<li><p>什么是 Runtime </p>
</li>
<li><p>Runtime 有什么用途 </p>
</li>
<li><p>Runtime 的API及其用法 </p>
</li>
<li><p>Runtime 的实际使用</p>
</li>
</ul>
<h4 id="什么是-Runtime？"><a href="#什么是-Runtime？" class="headerlink" title="什么是 Runtime？"></a>什么是 Runtime？</h4><p>Objective-C是一门简单的语言，95%是C。只是在语言层面上加了些关键字和语法。真正让Objective-C如此强大的是Runtime 。它很小但却很强大。它的核心是消息分发。</p>
<p>Objective-C具有相当多的动态特性，基本的，也是经常被提到和用到的有动态类型（Dynamic typing），动态绑定（Dynamic binding）和动态加载（Dynamic loading）。</p>
<p>那么OC是如何实现这些动态的特性呢？当然就是使用Runtime了。</p>
<p>简单来说，runtime是一个实现Objective-C语言的C库。对象可以用C语言中的结构体表示，而方法（methods）可以用C函数实现。事实上，他们 差不多也是这么干了，另外再加上了一些额外的特性。这些结构体和函数被runtime函数封装后，我们可以在程序运行时创建，检 查，修改类，对象和它们的方法。</p>
<p>除了封装，runtime库也负责找出方法的最终执行代码。当程序执行[object doSomething]时，不会直接找到方法并调用。相反，一条消息（message）会发送给对象（在这儿，我们通常叫它接收者）。runtime库给次机会让对象根据消息决定该作出什么样的反应。消息传递（message-passing）是OC最重要的部分，而不是对象： </p>
<p>其实这里面更为重要的理念是“消息命令”（messaging），这才是Smalltalk的核心内容（现在尚有一些内容还没有全部完成）。制造一个庞大且可扩展系 统的关键是设计它各个模块之间的通信方式，而不是关注它的内部属性和行为。 </p>
<h4 id="Runtime-有什么用处？"><a href="#Runtime-有什么用处？" class="headerlink" title="Runtime 有什么用处？"></a>Runtime 有什么用处？</h4><p>在程序优化高性能的时候，如果遇到OC处理不了的问题可以使用Runtime处理。</p>
<ul>
<li><p>在程序运行过程中, 动态创建一个类(比如KVO的底层实现)</p>
</li>
<li><p>在程序运行过程中, 动态地为某个类添加属性\方法, 修改属性值\方法</p>
</li>
<li><p>遍历一个类的所有成员变量(属性)\所有方法</p>
</li>
</ul>
<p>在我们平时编写的OC代码中, 程序运行过程时, 其实最终都是转成了runtime的C语言代码, runtime算是OC的幕后工作者。</p>
<h4 id="Runtime-的API及其用法"><a href="#Runtime-的API及其用法" class="headerlink" title="Runtime 的API及其用法"></a>Runtime 的API及其用法</h4><ul>
<li><p>objc_msgSend 可以给对象发送消息 </p>
</li>
<li><p>objc_getClass(“Person”) 可以获取到指定名称的对象</p>
</li>
<li><p>sel_registerName(“alloc”) 可以调用到对象的方法</p>
</li>
<li><p>class_copyMethodList : 遍历某个类所有的方法</p>
</li>
<li><p>class_copyIvarList : 遍历某个类所有的成员变量</p>
</li>
</ul>
<h4 id="Runtime-的实际使用"><a href="#Runtime-的实际使用" class="headerlink" title="Runtime 的实际使用"></a>Runtime 的实际使用</h4><h6 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo 1"></a>Demo 1</h6><p>比如说，下面一个创建对象的方法中， </p>
<pre><code>//OC : 
[[MJPerson alloc] init] 
//runtime : 
objc_msgSend(objc_msgSend(“MJPerson” , “alloc”), “init”) 
</code></pre>
<p> <code>P.S. 用clang将OC反编译成c++去看底层的实现机制，有助于深入了解实现原理</code></p>
<ul>
<li>我们随便写一个小程序，代码如下： </li>
</ul>
<p>person类头文件如下，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">@interface Person : NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) NSString *name; </span><br><span class="line">@property (nonatomic, assign) int age;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>main.m文件如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, const char * argv[])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	Person *p = [[Person alloc] init];</span><br><span class="line"></span><br><span class="line">	NSString *str = @&quot;zhangsan&quot;;</span><br><span class="line"></span><br><span class="line">	p.name = str;</span><br><span class="line">	// p.name 等价于</span><br><span class="line">	[p setName:str];</span><br><span class="line"></span><br><span class="line">	p.age = 20;</span><br><span class="line"></span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们打开终端，在命令行找到cd到文件目录，然后中输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -rewrite-objc main.m </span><br></pre></td></tr></table></figure>
<p>命令可以将main.m编译成C++的代码，改成不同的文件名，就会生成不同的c++代码<br>这是就生成了main.cpp这个c++文件，打开文件代码<br>查看该main.cpp最底下的main函数，<br>这样我们就可以看到底层具体实现的方式！</p>
<h6 id="Demo-2"><a href="#Demo-2" class="headerlink" title="Demo 2"></a>Demo 2</h6><p>我们需要对一个类的属性进行归档解档的时候属性特别的多，这时候，我们就会写很多对应的代码，但是如果使用了runtime就可以动态设置！ </p>
<p>例如，Person.h的文件如下所示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@interface PYPerson : NSObject </span><br><span class="line">@property (nonatomic, assign) int age; </span><br><span class="line">@property (nonatomic, assign) int height; </span><br><span class="line">@property (nonatomic, copy) NSString *name; </span><br><span class="line">@property (nonatomic, assign) int age2; </span><br><span class="line">@property (nonatomic, assign) int height2; </span><br><span class="line">@property (nonatomic, assign) int age3; </span><br><span class="line">@property (nonatomic, assign) int height3; </span><br><span class="line">@property (nonatomic, assign) int age4; </span><br><span class="line">@property (nonatomic, assign) int height4;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Person.m 实现文件的内容如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;PYPerson.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation PYPerson</span><br><span class="line"></span><br><span class="line">- (void)encodeWithCoder:(NSCoder )encoder </span><br><span class="line">&#123; </span><br><span class="line">	unsigned int count = 0; </span><br><span class="line">	Ivar ivars = class_copyIvarList([PYPerson class], &amp;count);</span><br><span class="line"></span><br><span class="line">	for (int i = 0; i&lt;count; i++) &#123;</span><br><span class="line"></span><br><span class="line">		// 取出i位置对应的成员变量</span><br><span class="line">		Ivar ivar = ivars[i];</span><br><span class="line"></span><br><span class="line">		// 查看成员变量</span><br><span class="line">		const char *name = ivar_getName(ivar);</span><br><span class="line"></span><br><span class="line">		// 归档</span><br><span class="line">		NSString *key = [NSString stringWithUTF8String:name];</span><br><span class="line">		id value = [self valueForKey:key];</span><br><span class="line">		[encoder encodeObject:value forKey:key];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	free(ivars); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id)initWithCoder:(NSCoder *)decoder </span><br><span class="line">&#123; </span><br><span class="line">	if (self = [super init])</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		unsigned int count = 0;</span><br><span class="line">		Ivar *ivars = class_copyIvarList([PYPerson class], &amp;count);</span><br><span class="line"></span><br><span class="line">		for (int i = 0; i&lt;count; i++) </span><br><span class="line">		&#123;</span><br><span class="line">   			// 取出i位置对应的成员变量</span><br><span class="line">   			Ivar ivar = ivars[i];</span><br><span class="line"></span><br><span class="line">   			// 查看成员变量</span><br><span class="line">   			const char *name = ivar_getName(ivar);</span><br><span class="line"></span><br><span class="line">   			// 归档</span><br><span class="line">  				NSString *key = [NSString stringWithUTF8String:name];</span><br><span class="line">   			id value = [decoder decodeObjectForKey:key];</span><br><span class="line"></span><br><span class="line">  				// 设置到成员变量身上</span><br><span class="line">   			[self setValue:value forKey:key];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		free(ivars);</span><br><span class="line">	&#125; </span><br><span class="line">	return self; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<h4 id="相关应用"><a href="#相关应用" class="headerlink" title="相关应用:"></a>相关应用:</h4><ul>
<li><p>NSCoding(归档和解档, 利用runtime遍历模型对象的所有属性)</p>
</li>
<li><p>字典 –&gt; 模型 (利用runtime遍历模型对象的所有属性, 根据属性名从字典中取出对应的值, 设置到模型的属性上)</p>
</li>
<li><p>KVO(利用runtime动态产生一个类)</p>
</li>
<li><p>用于封装框架(想怎么改就怎么改) </p>
</li>
<li><p>Ivar : 成员变量 </p>
</li>
<li><p>Method : 成员方法</p>
</li>
</ul>
<h6 id="Demo-3"><a href="#Demo-3" class="headerlink" title="Demo 3"></a>Demo 3</h6><p>众所周知，OC中的Category是只能有方法而不能有属性的，这里我们可以使用Runtime为Category添加属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">UIAlertView+ZQ_Add.h</span><br><span class="line">		</span><br><span class="line">	#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">	typedef void(^UIAlertViewCallBackBlock)(NSInteger index);</span><br><span class="line"></span><br><span class="line">	@interface UIAlertView (ZQ_Add)&lt;UIAlertViewDelegate&gt;</span><br><span class="line"></span><br><span class="line">	@property (nonatomic, copy) UIAlertViewCallBackBlock alertViewCallBackBlock;</span><br><span class="line"></span><br><span class="line">	+ (void)alertWithTitle:(NSString *)title </span><br><span class="line">					message:(NSString *)message </span><br><span class="line">			  cancelBtnName:(NSString *)cancelBtnName</span><br><span class="line">			  callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock;</span><br><span class="line"></span><br><span class="line">	+ (void)alertWithTitle:(NSString *)title </span><br><span class="line">					message:(NSString *)message </span><br><span class="line">			  cancelBtnName:(NSString *)cancelBtnName</span><br><span class="line">	           otherBtnName:(NSString *)otherBtnName </span><br><span class="line">	          callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock;</span><br><span class="line"></span><br><span class="line">	+ (void) alertWithTitle:(NSString *)title </span><br><span class="line">				    message:(NSString *)message </span><br><span class="line">			  cancelBtnName:(NSString *)cancelBtnName</span><br><span class="line">			   firstBtnName:(NSString *)firstBtnName</span><br><span class="line">			   secondBtnName:(NSString *)secondBtnName </span><br><span class="line">			   callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock;</span><br><span class="line">	@end</span><br></pre></td></tr></table></figure>

<p>UIAlertView+ZQ_Add.m</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;UIAlertView+ZQ_Add.h&quot;</span><br><span class="line">#import &lt;objc/runtime.h&gt;</span><br><span class="line"></span><br><span class="line">//关键字</span><br><span class="line">static void* UIAlertViewKey = @&quot;UIAlertViewKey&quot;;</span><br><span class="line"></span><br><span class="line">@implementation UIAlertView (ZQ_Add)</span><br><span class="line"></span><br><span class="line">//一个按键</span><br><span class="line">+ (void)alertWithTitle:(NSString *)title </span><br><span class="line">				message:(NSString *)message </span><br><span class="line">		  cancelBtnName:(NSString *)cancelBtnName </span><br><span class="line">		  callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock</span><br><span class="line">&#123;</span><br><span class="line">   	UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title </span><br><span class="line">   		message:message delegate:nil cancelButtonTitle:cancelBtnName 			otherButtonTitles: nil];</span><br><span class="line">   	alert.delegate = alert;</span><br><span class="line">   	[alert show];</span><br><span class="line">   	alert.alertViewCallBackBlock = alertViewCallBackBlock;</span><br><span class="line">&#125;</span><br><span class="line">//两个按键</span><br><span class="line">+ (void)alertWithTitle:(NSString *)title message:(NSString *)message cancelBtnName:(NSString *)cancelBtnName otherBtnName:(NSString *)otherBtnName callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock</span><br><span class="line">&#123;</span><br><span class="line">  	 	UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:cancelBtnName otherButtonTitles: otherBtnName, nil];</span><br><span class="line">   	alert.delegate = alert;</span><br><span class="line">   	[alert show];</span><br><span class="line">   	alert.alertViewCallBackBlock = alertViewCallBackBlock;</span><br><span class="line">&#125;</span><br><span class="line">//三个按键</span><br><span class="line">+ (void)alertWithTitle:(NSString *)title message:(NSString *)message cancelBtnName:(NSString *)cancelBtnName firstBtnName:(NSString *)firstBtnName secondBtnName:(NSString *)secondBtnName callBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock</span><br><span class="line">&#123;</span><br><span class="line">   	UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:cancelBtnName otherButtonTitles: firstBtnName,secondBtnName, nil];</span><br><span class="line">  	 	alert.delegate = alert;</span><br><span class="line">   	[alert show];</span><br><span class="line">   	alert.alertViewCallBackBlock = alertViewCallBackBlock;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setAlertViewCallBackBlock:(UIAlertViewCallBackBlock)alertViewCallBackBlock</span><br><span class="line">&#123;</span><br><span class="line">   	//1.源对象self</span><br><span class="line">   	//2.关键字 唯一静态变量key - UIAlertViewKey</span><br><span class="line">   	//3.关联的对象 alertViewCallBackBlock</span><br><span class="line">   	//4.关键策略  OBJC_ASSOCIATION_COPY</span><br><span class="line">  		 objc_setAssociatedObject(self, &amp;UIAlertViewKey, alertViewCallBackBlock, 				OBJC_ASSOCIATION_COPY);</span><br><span class="line">&#125;</span><br><span class="line">- (UIAlertViewCallBackBlock)alertViewCallBackBlock</span><br><span class="line">&#123;//通过 objc_getAssociatedObject 获取关联对象</span><br><span class="line">  		 return objc_getAssociatedObject(self, &amp;UIAlertViewKey);</span><br><span class="line">&#125;</span><br><span class="line">#pragma mark - UIAlertViewDelegate</span><br><span class="line">- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:	(NSInteger)buttonIndex</span><br><span class="line">&#123;</span><br><span class="line">  		 if (self.alertViewCallBackBlock)</span><br><span class="line">       	self.alertViewCallBackBlock(buttonIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<h6 id="Demo-4"><a href="#Demo-4" class="headerlink" title="Demo 4"></a>Demo 4</h6><p>(未完待续)</p>
<h4 id="其他的一些资料"><a href="#其他的一些资料" class="headerlink" title="其他的一些资料"></a>其他的一些资料</h4><ul>
<li><p><a target="_blank" rel="noopener" href="http://weibo.com/onevcat">喵神</a>早期作品<a target="_blank" rel="noopener" href="http://www.onevcat.com/2012/04/objective-c-runtime/">传送门</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://github.com/lzyy">LimBoy</a>翻译的文章<a target="_blank" rel="noopener" href="http://limboy.me/ios/2013/08/03/dynamic-tips-and-tricks-with-objective-c.html">传送门</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/yechunjun">Chun</a>翻译的文章<a target="_blank" rel="noopener" href="http://chun.tips/">刨根问底runtime</a></p>
</li>
</ul>
</article><br><br><span class="next-post"><a href="/2015/06/20/2015-06-20-Effective Objective-C 2.0 读书笔记_48/" itemprop="url">Older Post ⇒</a></span><span class="prev-post"><a href="/2015/08/24/2015-08-24-Cent-OS-Install-Apache/" itemprop="url">⇐ Next Post </a></span><br><br><br></main></body></html>